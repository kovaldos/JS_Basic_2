<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<title>HW 4</title>
	<link
			rel="stylesheet"
			href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/4.1.1/animate.min.css"
	/>
	<style>
		.error {
			border: 2px solid red;
		}
	</style>
</head>
<body>
<!--Выполнить все задачи в теге script. Комментарии, в которых написаны задачи, не стирать, код с решением задачи пишем под комментарием.-->

<input id="from" type="text">
<label for="from">В инпуте написано: </label><span class="waiting-for-text"></span>

<br>

<button class="messageBtn">Показать блок</button>
<div class="message">
	Привет :)
</div>

<br>

<form>
	<label>
		Первый инпут:
		<input class="form-control" type="text">
	</label>
	<br>
	<br>
	<label>
		Второй инпут:
		<select class="form-control">
			<option value=""></option>
			<option value="1">Один</option>
			<option value="2">Два</option>
		</select>
	</label>
	<br>
	<br>
	<button>Отправить</button>
</form>

<script>
	"use strict";


	// 1. При изменении значения в input с id="from", значение содержащееся в нем должно моментально отображаться в span. То есть при печати в input'е тег span также должен меняться.
	const changingTextField = document.querySelector('#from');
	const changingText = document.querySelector('.waiting-for-text');
	const changeText = () => {
		changingText.textContent = changingTextField.value;
	}
	
	changingTextField.addEventListener('input', changeText);
	
	
	// 2. При клике на кнопку с классом messageBtn необходимо элементу с классом message:
	// 		- добавить два класса: animate_animated и animate_fadeInLeftBig
	// - поставить данному элементу стиль visibility в значение 'visible'.
	
	const messageBtn = document.querySelector('.messageBtn');
	const message = document.querySelector('.message');
	
	messageBtn.addEventListener('click', () => {
		message.classList.add('animate__animated');
		message.classList.add('animate__fadeInLeftBig');
		message.style.visibility = 'visible';
	})
	
	// 3. Необходимо при отправке формы проверить, заполнены ли все поля в этой форме.
	// Если какое-либо поле не заполнено, форма не должна отправляться,
	// также должны быть подсвечены незаполненные поля (необходимо поставить класс error незаполненным полям).
	// Как только пользователь начинает заполнять какое-либо поле, необходимо, при вводе в данное поле, произвести проверку:
	// 		- Если поле пустое, необходимо данное поле подсветить (поставить класс error данному полю).
	// - Если поле было чем-либо заполнено, подсветку (класс error) необходимо убрать.
	
	const form = document.querySelector('form');
	
	form.addEventListener('submit', function (event) {
		// Очищаем все предыдущие классы error
		const errorFields = form.querySelectorAll('.error');
		errorFields.forEach(function (field) {
			field.classList.remove('error');
		});
		
		// Проверяем каждый input и select в форме
		const formElements = form.querySelectorAll('input, select');
		console.log(formElements);
		formElements.forEach(function (element) {
			// Проверяем, является ли элемент input или select
			if (element.tagName === 'INPUT' || element.tagName === 'SELECT') {
				// Если поле пустое и не является селектом с пустым значением, добавляем класс error
				if (!element.value.trim() && !(element.tagName === 'SELECT' && !element.value === "")) {
					element.classList.add('error');
				}
			}
		});
		
		// Если есть хотя бы одно поле с классом error, предотвращаем отправку формы
		if (form.querySelector('.error')) {
			event.preventDefault();
		}
	});
	
	form.addEventListener('input', function (event) {
		const target = event.target;
		
		// Убираем класс error при вводе в поле
		if (target.tagName === 'INPUT' || target.tagName === 'SELECT') {
			target.classList.remove('error');
		}
	});

</script>
	</body>
</html>
